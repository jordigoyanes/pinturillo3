(function(e){function t(t){for(var o,a,r=t[0],l=t[1],c=t[2],u=0,h=[];u<r.length;u++)a=r[u],n[a]&&h.push(n[a][0]),n[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(h.length)h.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],o=!0,a=1;a<s.length;a++){var l=s[a];0!==n[l]&&(o=!1)}o&&(i.splice(t--,1),e=r(r.s=s[0]))}return e}var o={},n={app:0},i=[];function a(e){return r.p+"js/"+({about:"about"}[e]||e)+"."+{about:"8d2b81a1"}[e]+".js"}function r(t){if(o[t])return o[t].exports;var s=o[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.e=function(e){var t=[],s=n[e];if(0!==s)if(s)t.push(s[2]);else{var o=new Promise(function(t,o){s=n[e]=[t,o]});t.push(s[2]=o);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=a(e),i=function(t){l.onerror=l.onload=null,clearTimeout(c);var s=n[e];if(0!==s){if(s){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+o+": "+i+")");a.type=o,a.request=i,s[1](a)}n[e]=void 0}};var c=setTimeout(function(){i({type:"timeout",target:l})},12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},r.m=e,r.c=o,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(s,o,function(t){return e[t]}.bind(null,o));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=c;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0734":function(e,t,s){"use strict";var o=s("dad4"),n=s.n(o);n.a},1:function(e,t){},2221:function(e,t,s){"use strict";var o=s("a710"),n=s.n(o);n.a},3277:function(e,t,s){"use strict";var o=s("d2ba"),n=s.n(o);n.a},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var o=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},i=[],a=(s("5c0b"),s("2877")),r={},l=Object(a["a"])(r,n,i,!1,null,null,null),c=l.exports,u=(s("7f7f"),s("8c4f")),d=(s("96cf"),s("3b8d")),h=s("2f62"),m=s("8055"),f=s.n(m);o["a"].use(h["a"]);var v=new h["a"].Store({state:{socket:f()("https://pinturillo3.herokuapp.com"),localPlayer:null,isLoggedIn:!1,room_id:null,players:null},mutations:{set_localplayer:function(e,t){e.localPlayer=t},set_score:function(e,t){for(var s=e.players,o=0;o<s.length;o++)s[o].username===t.username&&(s[o].score+=t.score)},set_room_id:function(e,t){e.room_id=t},set_playerlist:function(e,t){e.players=t},set_logged:function(e,t){e.isLoggedIn=t}},actions:{create_room:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t,s){var o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:o=t.state,console.log(o+s);case 2:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}()}}),p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"hero is-dark is-fullheight"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container is-mobile"},[s("div",{staticClass:"columns is-centered"},[s("div",{staticClass:"column is-half"},[s("h1",{staticClass:"title is-size-1 has-text-centered"},[e._v("Pinturillo3")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showErr,expression:"showErr"}],staticClass:"notification is-danger"},[s("button",{staticClass:"delete",on:{click:function(t){e.showErr=!1}}}),e._v("\n            Player nick cannot be empty!\n          ")]),s("div",{staticClass:"box"},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("Nick:")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.localPlayer,expression:"localPlayer"}],staticClass:"input",attrs:{type:"text",placeholder:"player"},domProps:{value:e.localPlayer},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.verify_user()},input:function(t){t.target.composing||(e.localPlayer=t.target.value)}}})])]),e._m(0),s("button",{staticClass:"button is-large is-fullwidth is-success is-outlined",on:{click:function(t){return e.verify_user()}}},[s("p",[e._v("Play!")])])])])])])]),s("Footer")],1)},_=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[s("div",{staticClass:"select is-info"},[s("select",[s("option",[e._v("EspaÃ±ol")])])])])}],g=s("cebc"),y=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},b=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"hero-foot"},[s("div",{staticClass:"section"},[s("div",{staticClass:"container"},[s("h1",{staticClass:"is-3 has-text-centered"},[e._v("\n        Made by "),s("a",{attrs:{href:"https://github.com/jordigoyanes"}},[e._v("Jordi Goyanes")])])])])])}],w={},C=Object(a["a"])(w,y,b,!1,null,null,null),x=C.exports,k={name:"home",components:{Footer:x},data:function(){return{localPlayer:"player",showErr:!1}},methods:Object(g["a"])({verify_user:function(){""===this.localPlayer?this.showErr=!0:(this.set_localplayer(this.localPlayer),this.$router.push({path:"select-room"}))}},Object(h["c"])({set_localplayer:"set_localplayer"})),computed:{}},P=k,j=Object(a["a"])(P,p,_,!1,null,null,null),O=j.exports,E=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("section",{staticClass:"section has-background-warning"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-item level-left"},[s("button",{staticClass:"button is-danger",on:{click:function(t){return e.leave()}}},[e._v("Leave Room")])]),s("h1",{staticClass:"is-size-3 level-item has-text-centered"},[e._v("\n        Pinturillo 3\n      ")]),s("div",{staticClass:"level-item level-right"},[s("h4",{staticClass:"title is-size-4"},[e._v("Room ID: "+e._s(this.room_id))])])])]),s("div",{staticClass:"hero is-mobile is-dark is-fullheight"},[s("div",{attrs:{id:"game-columns"}},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-one-fifth"},[s("div",{staticClass:"box"},[e._v("\n            usuarios y puntuacion\n            "),s("Scores")],1)]),s("div",{staticClass:"column is-half"},[s("div",{attrs:{id:"canvas-wrapper"}},[s("DrawingArea")],1)]),s("div",{staticClass:"column"},[s("div",{staticClass:"box"},[s("p",{staticClass:"is-primary"},[e._v("chat")]),s("Chatbox")],1)])])])])])},$=[],L=s("f499"),M=s.n(L),S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("canvas",{ref:"canvas",attrs:{id:"canvas"},on:{mousedown:function(t){return e.onMouseDown(t)},mouseup:function(t){return e.onMouseUp(t)},mousemove:function(t){return e.onMouseMove(t)}}})},z=[],R={name:"drawingArea",data:function(){return{canvas:null,context:null,rect:null,drawing:!1,current:{color:"red",lineWidth:2,x:0,y:0}}},computed:Object(g["a"])({},Object(h["d"])({socket:"socket"})),methods:{onMouseDown:function(e){console.log("x:"+e.offsetX),console.log("y:"+e.offsetY),this.drawing=!0,this.current.x=e.offsetX,this.current.y=e.offsetY},onMouseUp:function(e){var t=e.offsetX,s=e.offsetY;this.drawing&&(this.drawLine(this.current.x,this.current.y,t,s,this.current.color,!0),this.drawing=!1)},onMouseMove:function(e){if(this.drawing){var t=e.offsetX,s=e.offsetY;this.drawLine(this.current.x,this.current.y,t,s,this.current.color,!0),this.current.x=t,this.current.y=s}},drawLine:function(e,t,s,o,n,i){console.log("x0:"+e+",y0:"+t+",x1:"+s+",y1:"+o),this.context.beginPath(),this.context.moveTo(e,t),this.context.lineTo(s,o),this.context.strokeStyle=n,this.context.lineWidth=2,this.context.stroke(),this.context.closePath(),i&&this.socket.emit("drawing",{x0:e,y0:t,x1:s,y1:o,color:n})},onDrawingEvent:function(e){this.drawLine(e.x0,e.y0,e.x1,e.y1,e.color)},onResize:function(){this.canvas.width=this.canvas.parentElement.clientWidth,this.canvas.height=this.canvas.parentElement.clientHeight}},mounted:function(){this.canvas=this.$refs.canvas,this.context=this.$refs.canvas.getContext("2d"),this.context.fillStyle="#333",this.context.strokeStyle=this.color,this.context.lineWidth=this.lineWidth,this.context.lineCap="round",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),window.addEventListener("resize",this.onResize,!1),this.onResize(),this.socket.on("drawing",this.onDrawingEvent)}},N=R,D=(s("3277"),Object(a["a"])(N,S,z,!1,null,null,null)),T=D.exports,F=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"field"},[s("div",{staticClass:"chatbox"},[s("ul",e._l(e.chat_messages,function(t,o){return s("li",{key:o},[s("p",[s("strong",[e._v(e._s(t.username))]),e._v(": "+e._s(t.message)+"\n          ")])])}),0)])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.guess,expression:"guess"}],staticClass:"input is-danger",attrs:{type:"text",placeholder:"Enter guess..."},domProps:{value:e.guess},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.send_message(t)},input:function(t){t.target.composing||(e.guess=t.target.value)}}})])])])},W=[],A=s("75fc"),U={name:"Chatbox",data:function(){return{guess:"",chat_messages:[{username:"jordi",message:"i don't know"}]}},methods:{log:function(){console.log(this.guess)},send_message:function(){""!=this.guess&&(this.socket.emit("new_message",{room_id:this.room_id,username:this.localPlayer,message:this.guess}),this.guess="")}},mounted:function(){var e=this;this.socket.on("new_message",function(t){e.chat_messages=[].concat(Object(A["a"])(e.chat_messages),[t])})},computed:Object(g["a"])({},Object(h["d"])({socket:"socket",localPlayer:"localPlayer",room_id:"room_id"}))},X=U,Y=(s("6298"),Object(a["a"])(X,F,W,!1,null,null,null)),I=Y.exports,J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"scores"}},[s("ul",e._l(e.orderedUsers,function(t,o){return s("li",{key:o},[t.username==e.localPlayer?s("div",[s("strong",[e._v(e._s(t.username))])]):s("div",[e._v("\n        "+e._s(t.username)+"\n      ")]),e._v("\n      - Score: "+e._s(t.score)+"\n    ")])}),0)])},q=[],B=s("2ef0"),G=s.n(B),H={name:"scores",computed:Object(g["a"])({},Object(h["d"])({players:"players",localPlayer:"localPlayer"}),{orderedUsers:function(){return G.a.orderBy(this.players,"score").reverse()}})},K=H,Q=(s("0734"),Object(a["a"])(K,J,q,!1,null,null,null)),V=Q.exports,Z={name:"game",components:{DrawingArea:T,Chatbox:I,Scores:V},methods:Object(g["a"])({leave:function(){this.socket.emit("disconnect"),this.set_logged(!1),this.$router.push({name:"home"})}},Object(h["c"])({set_room_id:"set_room_id",set_playerlist:"set_playerlist",set_logged:"set_logged",set_score:"set_score"})),computed:Object(g["a"])({},Object(h["d"])({socket:"socket",room_id:"room_id",localPlayer:"localPlayer",players:"players"})),mounted:function(){var e=this;this.socket.on("left_room",function(t){e.set_playerlist(t.players),console.log("this is the new data: "+M()(t.players))})}},ee=Z,te=(s("2221"),Object(a["a"])(ee,E,$,!1,null,null,null)),se=te.exports,oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"hero is-dark is-fullheight"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container is-mobile"},[s("h1",{staticClass:"title is-size-1 has-text-centered"},[e._v("Pinturillo3")]),e.isLoading?s("div",[s("progress",{staticClass:"progress is-success",attrs:{max:"100"}},[e._v("45%")])]):s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("div",{staticClass:"box has-background-success game-select",on:{click:function(t){return e.goPublic()}}},[s("h1",{staticClass:" is-size-1 has-text-centered"},[e._v("Play public")])])]),s("div",{staticClass:"column"},[s("div",{staticClass:"box has-background-warning game-select",on:{click:function(t){return e.goPrivate()}}},[s("h1",{staticClass:" is-size-1 has-text-centered"},[e._v("Private Room")])])])])])]),s("Footer")],1)},ne=[],ie={components:{Footer:x},data:function(){return{showErr:!1,room_name:"",room_password:"",isLoading:!1}},methods:Object(g["a"])({goPublic:function(){this.isLoading=!0,this.socket.emit("join_public_room",{player:this.localPlayer})},goPrivate:function(){this.$router.push({name:"private"})}},Object(h["b"])({join_public_room:"join_public_room"}),Object(h["c"])({set_room_id:"set_room_id",set_playerlist:"set_playerlist",set_logged:"set_logged",set_localplayer:"set_localplayer"})),mounted:function(){var e=this;this.socket.on("joined_room",function(t){e.set_playerlist(t.players)}),this.socket.on("user_join",function(t){console.log("this is original: "+t.original_joiner_name),console.log("this is new joiner name: "+t.new_joiner_name),e.set_localplayer(t.new_joiner_name),e.set_logged(!0),e.set_room_id(t.id),e.set_playerlist(t.players),e.$router.push({path:"/room/"+e.room_id})})},computed:Object(g["a"])({},Object(h["d"])({socket:"socket",localPlayer:"localPlayer",room_id:"room_id"}))},ae=ie,re=(s("5fae"),Object(a["a"])(ae,oe,ne,!1,null,null,null)),le=re.exports,ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"hero is-dark is-fullheight"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container is-mobile"},[s("div",{staticClass:"columns is-centered"},[s("div",{staticClass:"column is-half"},[s("h1",{staticClass:"title is-size-1 has-text-centered"},[e._v("Pinturillo3")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showErr,expression:"showErr"}],staticClass:"notification is-danger"},[s("button",{staticClass:"delete",on:{click:function(t){e.showErr=!1}}}),e._v("\n            Password cannot be empty\n          ")]),s("div",{staticClass:"box"},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("Room Name:")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.room_name,expression:"room_name"}],staticClass:"input",attrs:{type:"text",placeholder:"room name"},domProps:{value:e.room_name},on:{input:function(t){t.target.composing||(e.room_name=t.target.value)}}})])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("Room Password:")]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.room_password,expression:"room_password"}],staticClass:"input",attrs:{type:"text",placeholder:"password"},domProps:{value:e.room_password},on:{input:function(t){t.target.composing||(e.room_password=t.target.value)}}})])]),s("button",{staticClass:"button is-fullwidth is-success is-outlined",on:{click:function(t){return e.setLocalPlayer()}}},[s("p",[e._v("OK")])])])])])])]),s("Footer")],1)},ue=[],de={components:{Footer:x},data:function(){return{showErr:!1,room_name:"",room_password:"",isLoading:!1}},created:function(){console.log("hi")}},he=de,me=Object(a["a"])(he,ce,ue,!1,null,null,null),fe=me.exports;o["a"].use(u["a"]);var ve=new u["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:O},{path:"/room/:id",name:"game",component:se},{path:"/select-room",name:"room-select",component:le},{path:"/private",name:"private",component:fe},{path:"/about",name:"about",component:function(){return s.e("about").then(s.bind(null,"f820"))}}]});ve.beforeEach(function(e,t,s){"home"==e.name||v.state.localPlayer?s():s({path:"/"})});var pe=ve;o["a"].config.productionTip=!1,new o["a"]({router:pe,store:v,render:function(e){return e(c)}}).$mount("#app")},"5c0b":function(e,t,s){"use strict";var o=s("5e27"),n=s.n(o);n.a},"5e27":function(e,t,s){},"5fae":function(e,t,s){"use strict";var o=s("7092"),n=s.n(o);n.a},6298:function(e,t,s){"use strict";var o=s("ecce"),n=s.n(o);n.a},7092:function(e,t,s){},a710:function(e,t,s){},d2ba:function(e,t,s){},dad4:function(e,t,s){},ecce:function(e,t,s){}});
//# sourceMappingURL=app.96c27a45.js.map